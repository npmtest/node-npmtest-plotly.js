<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for node-npmtest-plotly.js/node_modules/plotly.js/src/plots/cartesian/set_convert.js</title>
    <meta charset="utf-8">
    <style>
        body, html {
            margin:0; padding: 0;
        }
        body {
            font-family: Arial, Helvetica;
            font-size: 10pt;
        }
        div.header, div.footer {
            background: #eee;
            padding: 1em;
        }
        div.header {
            height: 160px;
            padding: 0 1em 0 1em;
            z-index: 100;
            position: fixed;
            top: 0;
            border-bottom: 1px solid #666;
            width: 100%;
        }
        div.footer {
            border-top: 1px solid #666;
        }
        div.body {
            margin-top: 170px;
        }
        div.meta {
            font-size: 90%;
            text-align: center;
        }
        h1, h2, h3 {
            font-weight: normal;
        }
        h1 {
            font-size: 12pt;
        }
        h2 {
            font-size: 10pt;
        }
        pre {
            font-family: Menlo, Monaco, Consolas, Courier New, monospace;
            margin: 0;
            padding: 0;
            font-size: 14px;
            tab-size: 2;
        }

        div.path { font-size: 110%; }
        div.path a:link, div.path a:visited { color: #000; }
        table.coverage { border-collapse: collapse; margin:0; padding: 0 }

        table.coverage td {
            margin: 0;
            padding: 0;
            color: #111;
            vertical-align: top;
        }
        table.coverage td.line-count {
            width: 50px;
            text-align: right;
            padding-right: 5px;
        }
        table.coverage td.line-coverage {
            color: #777 !important;
            text-align: right;
            border-left: 1px solid #666;
            border-right: 1px solid #666;
        }

        table.coverage td.text {
        }

        table.coverage td span.cline-any {
            display: inline-block;
            padding: 0 5px;
            width: 40px;
        }
        table.coverage td span.cline-neutral {
            background: #eee;
        }
        table.coverage td span.cline-yes {
            background: #b5d592;
            color: #999;
        }
        table.coverage td span.cline-no {
            background: #fc8c84;
        }

        .cstat-yes { color: #111; }
        .cstat-no { background: #fc8c84; color: #111; }
        .fstat-no { background: #ffc520; color: #111 !important; }
        .cbranch-no { background:  yellow !important; color: #111; }

        .cstat-skip { background: #ddd; color: #111; }
        .fstat-skip { background: #ddd; color: #111 !important; }
        .cbranch-skip { background: #ddd !important; color: #111; }

        .missing-if-branch {
            display: inline-block;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: black;
            color: yellow;
        }

        .skip-if-branch {
            display: none;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: #ccc;
            color: white;
        }

        .missing-if-branch .typ, .skip-if-branch .typ {
            color: inherit !important;
        }

        .entity, .metric { font-weight: bold; }
        .metric { display: inline-block; border: 1px solid #333; padding: 0.3em; background: white; }
        .metric small { font-size: 80%; font-weight: normal; color: #666; }

        div.coverage-summary table { border-collapse: collapse; margin: 3em; font-size: 110%; }
        div.coverage-summary td, div.coverage-summary table  th { margin: 0; padding: 0.25em 1em; border-top: 1px solid #666; border-bottom: 1px solid #666; }
        div.coverage-summary th { text-align: left; border: 1px solid #666; background: #eee; font-weight: normal; }
        div.coverage-summary th.file { border-right: none !important; }
        div.coverage-summary th.pic { border-left: none !important; text-align: right; }
        div.coverage-summary th.pct { border-right: none !important; }
        div.coverage-summary th.abs { border-left: none !important; text-align: right; }
        div.coverage-summary td.pct { text-align: right; border-left: 1px solid #666; }
        div.coverage-summary td.abs { text-align: right; font-size: 90%; color: #444; border-right: 1px solid #666; }
        div.coverage-summary td.file { text-align: right; border-left: 1px solid #666; white-space: nowrap;  }
        div.coverage-summary td.pic { min-width: 120px !important;  }
        div.coverage-summary a:link { color: #000; }
        div.coverage-summary a:visited { color: #333; }
        div.coverage-summary tfoot td { border-top: 1px solid #666; }

        div.coverage-summary .yui3-datatable-sort-indicator, div.coverage-summary .dummy-sort-indicator {
            height: 10px;
            width: 7px;
            display: inline-block;
            margin-left: 0.5em;
        }
        div.coverage-summary .yui3-datatable-sort-indicator {
            background: no-repeat scroll 0 0 transparent;
        }
        div.coverage-summary .yui3-datatable-sorted .yui3-datatable-sort-indicator {
            background-position: 0 -20px;
        }
        div.coverage-summary .yui3-datatable-sorted-desc .yui3-datatable-sort-indicator {
            background-position: 0 -10px;
        }

        .high { background: #b5d592 !important; }
        .medium { background: #ffe87c !important; }
        .low { background: #fc8c84 !important; }

        span.cover-fill, span.cover-empty {
            display:inline-block;
            border:1px solid #444;
            background: white;
            height: 12px;
        }
        span.cover-fill {
            background: #ccc;
            border-right: 1px solid #444;
        }
        span.cover-empty {
            background: white;
            border-left: none;
        }
        span.cover-full {
            border-right: none !important;
        }
        pre.prettyprint {
            border: none !important;
            padding: 0 !important;
            margin: 0 !important;
        }
        .com { color: #999 !important; }
        .ignore-none { color: #999; font-weight: normal; }

    </style>
</head>
<body>
<div class="header low">
    <h1 style="font-weight: bold;">
        <a href="https://github.com/npmtest/node-npmtest-plotly.js">npmtest-plotly.js (v0.0.1)</a>
    </h1>
    <h1>Code coverage report for <span class="entity">node-npmtest-plotly.js/node_modules/plotly.js/src/plots/cartesian/set_convert.js</span></h1>
    <h2>
        
        Statements: <span class="metric">10.73% <small>(22 / 205)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Branches: <span class="metric">0% <small>(0 / 118)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Functions: <span class="metric">0% <small>(0 / 29)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Lines: <span class="metric">12.43% <small>(22 / 177)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../../../../../index.html">All files</a> &#187; <a href="index.html">node-npmtest-plotly.js/node_modules/plotly.js/src/plots/cartesian/</a> &#187; set_convert.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443</td><td class="line-coverage"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">/**
* Copyright 2012-2017, Plotly, Inc.
* All rights reserved.
*
* This source code is licensed under the MIT license found in the
* LICENSE file in the root directory of this source tree.
*/
&nbsp;
&nbsp;
'use strict';
&nbsp;
var d3 = require('d3');
var isNumeric = require('fast-isnumeric');
&nbsp;
var Lib = require('../../lib');
var cleanNumber = Lib.cleanNumber;
var ms2DateTime = Lib.ms2DateTime;
var dateTime2ms = Lib.dateTime2ms;
&nbsp;
var numConstants = require('../../constants/numerical');
var FP_SAFE = numConstants.FP_SAFE;
var BADNUM = numConstants.BADNUM;
&nbsp;
var constants = require('./constants');
var axisIds = require('./axis_ids');
&nbsp;
<span class="fstat-no" title="function not covered" >function fromLog(v) {</span>
<span class="cstat-no" title="statement not covered" >    return Math.pow(10, v);</span>
}
&nbsp;
<span class="fstat-no" title="function not covered" >function num(v) {</span>
<span class="cstat-no" title="statement not covered" >    if(!isNumeric(v)) <span class="cstat-no" title="statement not covered" >return BADNUM;</span></span>
<span class="cstat-no" title="statement not covered" >    v = Number(v);</span>
<span class="cstat-no" title="statement not covered" >    if(v &lt; -FP_SAFE || v &gt; FP_SAFE) <span class="cstat-no" title="statement not covered" >return BADNUM;</span></span>
<span class="cstat-no" title="statement not covered" >    return isNumeric(v) ? Number(v) : BADNUM;</span>
}
&nbsp;
/**
 * Define the conversion functions for an axis data is used in 5 ways:
 *
 *  d: data, in whatever form it's provided
 *  c: calcdata: turned into numbers, but not linearized
 *  l: linearized - same as c except for log axes (and other nonlinear
 *      mappings later?) this is used when we need to know if it's
 *      *possible* to show some data on this axis, without caring about
 *      the current range
 *  p: pixel value - mapped to the screen with current size and zoom
 *  r: ranges, tick0, and annotation positions match one of the above
 *     but are handled differently for different types:
 *     - linear and date: data format (d)
 *     - category: calcdata format (c), and will stay that way because
 *       the data format has no continuous mapping
 *     - log: linearized (l) format
 *       TODO: in v2.0 we plan to change it to data format. At that point
 *       shapes will work the same way as ranges, tick0, and annotations
 *       so they can use this conversion too.
 *
 * Creates/updates these conversion functions, and a few more utilities
 * like cleanRange, and makeCalcdata
 *
 * also clears the autorange bounds ._min and ._max
 * and the autotick constraints ._minDtick, ._forceTick0
 */
module.exports = <span class="fstat-no" title="function not covered" >function setConvert(ax, fullLayout) {</span>
<span class="cstat-no" title="statement not covered" >    fullLayout = fullLayout || {};</span>
&nbsp;
    // clipMult: how many axis lengths past the edge do we render?
    // for panning, 1-2 would suffice, but for zooming more is nice.
    // also, clipping can affect the direction of lines off the edge...
<span class="cstat-no" title="statement not covered" >    var clipMult = 10;</span>
&nbsp;
<span class="fstat-no" title="function not covered" >    function toLog(v, clip) {</span>
<span class="cstat-no" title="statement not covered" >        if(v &gt; 0) <span class="cstat-no" title="statement not covered" >return Math.log(v) / Math.LN10;</span></span>
&nbsp;
        else <span class="cstat-no" title="statement not covered" >if(v &lt;= 0 &amp;&amp; clip &amp;&amp; ax.range &amp;&amp; ax.range.length === 2) {</span>
            // clip NaN (ie past negative infinity) to clipMult axis
            // length past the negative edge
<span class="cstat-no" title="statement not covered" >            var r0 = ax.range[0],</span>
                r1 = ax.range[1];
<span class="cstat-no" title="statement not covered" >            return 0.5 * (r0 + r1 - 3 * clipMult * Math.abs(r0 - r1));</span>
        }
&nbsp;
        else <span class="cstat-no" title="statement not covered" >return BADNUM;</span>
    }
&nbsp;
    /*
     * wrapped dateTime2ms that:
     * - accepts ms numbers for backward compatibility
     * - inserts a dummy arg so calendar is the 3rd arg (see notes below).
     * - defaults to ax.calendar
     */
<span class="fstat-no" title="function not covered" >    function dt2ms(v, _, calendar) {</span>
        // NOTE: Changed this behavior: previously we took any numeric value
        // to be a ms, even if it was a string that could be a bare year.
        // Now we convert it as a date if at all possible, and only try
        // as (local) ms if that fails.
<span class="cstat-no" title="statement not covered" >        var ms = dateTime2ms(v, calendar || ax.calendar);</span>
<span class="cstat-no" title="statement not covered" >        if(ms === BADNUM) {</span>
<span class="cstat-no" title="statement not covered" >            if(isNumeric(v)) <span class="cstat-no" title="statement not covered" >ms = dateTime2ms(new Date(+v));</span></span>
            else <span class="cstat-no" title="statement not covered" >return BADNUM;</span>
        }
<span class="cstat-no" title="statement not covered" >        return ms;</span>
    }
&nbsp;
    // wrapped ms2DateTime to insert default ax.calendar
<span class="fstat-no" title="function not covered" >    function ms2dt(v, r, calendar) {</span>
<span class="cstat-no" title="statement not covered" >        return ms2DateTime(v, r, calendar || ax.calendar);</span>
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function getCategoryName(v) {</span>
<span class="cstat-no" title="statement not covered" >        return ax._categories[Math.round(v)];</span>
    }
&nbsp;
    /*
     * setCategoryIndex: return the index of category v,
     * inserting it in the list if it's not already there
     *
     * this will enter the categories in the order it
     * encounters them, ie all the categories from the
     * first data set, then all the ones from the second
     * that aren't in the first etc.
     *
     * it is assumed that this function is being invoked in the
     * already sorted category order; otherwise there would be
     * a disconnect between the array and the index returned
     */
<span class="fstat-no" title="function not covered" >    function setCategoryIndex(v) {</span>
<span class="cstat-no" title="statement not covered" >        if(v !== null &amp;&amp; v !== undefined) {</span>
<span class="cstat-no" title="statement not covered" >            if(ax._categoriesMap === undefined) {</span>
<span class="cstat-no" title="statement not covered" >                ax._categoriesMap = {};</span>
            }
&nbsp;
<span class="cstat-no" title="statement not covered" >            if(ax._categoriesMap[v] !== undefined) {</span>
<span class="cstat-no" title="statement not covered" >                return ax._categoriesMap[v];</span>
            } else {
<span class="cstat-no" title="statement not covered" >                ax._categories.push(v);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >                var curLength = ax._categories.length - 1;</span>
<span class="cstat-no" title="statement not covered" >                ax._categoriesMap[v] = curLength;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >                return curLength;</span>
            }
        }
<span class="cstat-no" title="statement not covered" >        return BADNUM;</span>
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function getCategoryIndex(v) {</span>
        // d2l/d2c variant that that won't add categories but will also
        // allow numbers to be mapped to the linearized axis positions
<span class="cstat-no" title="statement not covered" >        if(ax._categoriesMap) {</span>
<span class="cstat-no" title="statement not covered" >            var index = ax._categoriesMap[v];</span>
<span class="cstat-no" title="statement not covered" >            if(index !== undefined) <span class="cstat-no" title="statement not covered" >return index;</span></span>
        }
&nbsp;
<span class="cstat-no" title="statement not covered" >        if(typeof v === 'number') { <span class="cstat-no" title="statement not covered" >return v; </span>}</span>
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function l2p(v) {</span>
<span class="cstat-no" title="statement not covered" >        if(!isNumeric(v)) <span class="cstat-no" title="statement not covered" >return BADNUM;</span></span>
&nbsp;
        // include 2 fractional digits on pixel, for PDF zooming etc
<span class="cstat-no" title="statement not covered" >        return d3.round(ax._b + ax._m * v, 2);</span>
    }
&nbsp;
<span class="fstat-no" title="function not covered" >    function p2l(px) {</span> <span class="cstat-no" title="statement not covered" >return (px - ax._b) / ax._m; </span>}
&nbsp;
    // conversions among c/l/p are fairly simple - do them together for all axis types
<span class="cstat-no" title="statement not covered" >    ax.c2l = (ax.type === 'log') ? toLog : num;</span>
<span class="cstat-no" title="statement not covered" >    ax.l2c = (ax.type === 'log') ? fromLog : num;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    ax.l2p = l2p;</span>
<span class="cstat-no" title="statement not covered" >    ax.p2l = p2l;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >    ax.c2p = (ax.type === 'log') ? <span class="fstat-no" title="function not covered" >function(v, clip) {</span> <span class="cstat-no" title="statement not covered" >return l2p(toLog(v, clip)); </span>} : l2p;</span>
<span class="cstat-no" title="statement not covered" >    ax.p2c = (ax.type === 'log') ? <span class="fstat-no" title="function not covered" >function(px) {</span> <span class="cstat-no" title="statement not covered" >return fromLog(p2l(px)); </span>} : p2l;</span>
&nbsp;
    /*
     * now type-specific conversions for **ALL** other combinations
     * they're all written out, instead of being combinations of each other, for
     * both clarity and speed.
     */
<span class="cstat-no" title="statement not covered" >    if(['linear', '-'].indexOf(ax.type) !== -1) {</span>
        // all are data vals, but d and r need cleaning
<span class="cstat-no" title="statement not covered" >        ax.d2r = ax.r2d = ax.d2c = ax.r2c = ax.d2l = ax.r2l = cleanNumber;</span>
<span class="cstat-no" title="statement not covered" >        ax.c2d = ax.c2r = ax.l2d = ax.l2r = num;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        ax.d2p = ax.r2p = <span class="fstat-no" title="function not covered" >function(v) {</span> <span class="cstat-no" title="statement not covered" >return l2p(cleanNumber(v)); </span>};</span>
<span class="cstat-no" title="statement not covered" >        ax.p2d = ax.p2r = p2l;</span>
    }
    else <span class="cstat-no" title="statement not covered" >if(ax.type === 'log') {</span>
        // d and c are data vals, r and l are logged (but d and r need cleaning)
<span class="cstat-no" title="statement not covered" >        ax.d2r = ax.d2l = <span class="fstat-no" title="function not covered" >function(v, clip) {</span> <span class="cstat-no" title="statement not covered" >return toLog(cleanNumber(v), clip); </span>};</span>
<span class="cstat-no" title="statement not covered" >        ax.r2d = ax.r2c = <span class="fstat-no" title="function not covered" >function(v) {</span> <span class="cstat-no" title="statement not covered" >return fromLog(cleanNumber(v)); </span>};</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        ax.d2c = ax.r2l = cleanNumber;</span>
<span class="cstat-no" title="statement not covered" >        ax.c2d = ax.l2r = num;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        ax.c2r = toLog;</span>
<span class="cstat-no" title="statement not covered" >        ax.l2d = fromLog;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        ax.d2p = <span class="fstat-no" title="function not covered" >function(v, clip) {</span> <span class="cstat-no" title="statement not covered" >return l2p(ax.d2r(v, clip)); </span>};</span>
<span class="cstat-no" title="statement not covered" >        ax.p2d = <span class="fstat-no" title="function not covered" >function(px) {</span> <span class="cstat-no" title="statement not covered" >return fromLog(p2l(px)); </span>};</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        ax.r2p = <span class="fstat-no" title="function not covered" >function(v) {</span> <span class="cstat-no" title="statement not covered" >return l2p(cleanNumber(v)); </span>};</span>
<span class="cstat-no" title="statement not covered" >        ax.p2r = p2l;</span>
    }
    else <span class="cstat-no" title="statement not covered" >if(ax.type === 'date') {</span>
        // r and d are date strings, l and c are ms
&nbsp;
        /*
         * Any of these functions with r and d on either side, calendar is the
         * **3rd** argument. log has reserved the second argument.
         *
         * Unless you need the special behavior of the second arg (ms2DateTime
         * uses this to limit precision, toLog uses true to clip negatives
         * to offscreen low rather than undefined), it's safe to pass 0.
         */
<span class="cstat-no" title="statement not covered" >        ax.d2r = ax.r2d = Lib.identity;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        ax.d2c = ax.r2c = ax.d2l = ax.r2l = dt2ms;</span>
<span class="cstat-no" title="statement not covered" >        ax.c2d = ax.c2r = ax.l2d = ax.l2r = ms2dt;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        ax.d2p = ax.r2p = <span class="fstat-no" title="function not covered" >function(v, _, calendar) {</span> <span class="cstat-no" title="statement not covered" >return l2p(dt2ms(v, 0, calendar)); </span>};</span>
<span class="cstat-no" title="statement not covered" >        ax.p2d = ax.p2r = <span class="fstat-no" title="function not covered" >function(px, r, calendar) {</span> <span class="cstat-no" title="statement not covered" >return ms2dt(p2l(px), r, calendar); </span>};</span>
    }
    else <span class="cstat-no" title="statement not covered" >if(ax.type === 'category') {</span>
        // d is categories; r, c, and l are indices
        // TODO: should r accept category names too?
        // ie r2c and r2l would be getCategoryIndex (and r2p would change)
&nbsp;
<span class="cstat-no" title="statement not covered" >        ax.d2r = ax.d2c = ax.d2l = setCategoryIndex;</span>
<span class="cstat-no" title="statement not covered" >        ax.r2d = ax.c2d = ax.l2d = getCategoryName;</span>
&nbsp;
        // special d2l variant that won't add categories
<span class="cstat-no" title="statement not covered" >        ax.d2l_noadd = getCategoryIndex;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        ax.r2l = ax.l2r = ax.r2c = ax.c2r = num;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        ax.d2p = <span class="fstat-no" title="function not covered" >function(v) {</span> <span class="cstat-no" title="statement not covered" >return l2p(getCategoryIndex(v)); </span>};</span>
<span class="cstat-no" title="statement not covered" >        ax.p2d = <span class="fstat-no" title="function not covered" >function(px) {</span> <span class="cstat-no" title="statement not covered" >return getCategoryName(p2l(px)); </span>};</span>
<span class="cstat-no" title="statement not covered" >        ax.r2p = l2p;</span>
<span class="cstat-no" title="statement not covered" >        ax.p2r = p2l;</span>
    }
&nbsp;
    // find the range value at the specified (linear) fraction of the axis
<span class="cstat-no" title="statement not covered" >    ax.fraction2r = <span class="fstat-no" title="function not covered" >function(v) {</span></span>
<span class="cstat-no" title="statement not covered" >        var rl0 = ax.r2l(ax.range[0]),</span>
            rl1 = ax.r2l(ax.range[1]);
<span class="cstat-no" title="statement not covered" >        return ax.l2r(rl0 + v * (rl1 - rl0));</span>
    };
&nbsp;
    // find the fraction of the range at the specified range value
<span class="cstat-no" title="statement not covered" >    ax.r2fraction = <span class="fstat-no" title="function not covered" >function(v) {</span></span>
<span class="cstat-no" title="statement not covered" >        var rl0 = ax.r2l(ax.range[0]),</span>
            rl1 = ax.r2l(ax.range[1]);
<span class="cstat-no" title="statement not covered" >        return (ax.r2l(v) - rl0) / (rl1 - rl0);</span>
    };
&nbsp;
    /*
     * cleanRange: make sure range is a couplet of valid &amp; distinct values
     * keep numbers away from the limits of floating point numbers,
     * and dates away from the ends of our date system (+/- 9999 years)
     *
     * optional param rangeAttr: operate on a different attribute, like
     * ax._r, rather than ax.range
     */
<span class="cstat-no" title="statement not covered" >    ax.cleanRange = <span class="fstat-no" title="function not covered" >function(rangeAttr) {</span></span>
<span class="cstat-no" title="statement not covered" >        if(!rangeAttr) <span class="cstat-no" title="statement not covered" >rangeAttr = 'range';</span></span>
<span class="cstat-no" title="statement not covered" >        var range = Lib.nestedProperty(ax, rangeAttr).get(),</span>
            axLetter = (ax._id || 'x').charAt(0),
            i, dflt;
&nbsp;
<span class="cstat-no" title="statement not covered" >        if(ax.type === 'date') <span class="cstat-no" title="statement not covered" >dflt = Lib.dfltRange(ax.calendar);</span></span>
        else <span class="cstat-no" title="statement not covered" >if(axLetter === 'y') <span class="cstat-no" title="statement not covered" >dflt = constants.DFLTRANGEY;</span></span>
        else <span class="cstat-no" title="statement not covered" >dflt = constants.DFLTRANGEX;</span>
&nbsp;
        // make sure we don't later mutate the defaults
<span class="cstat-no" title="statement not covered" >        dflt = dflt.slice();</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        if(!range || range.length !== 2) {</span>
<span class="cstat-no" title="statement not covered" >            Lib.nestedProperty(ax, rangeAttr).set(dflt);</span>
<span class="cstat-no" title="statement not covered" >            return;</span>
        }
&nbsp;
<span class="cstat-no" title="statement not covered" >        if(ax.type === 'date') {</span>
            // check if milliseconds or js date objects are provided for range
            // and convert to date strings
<span class="cstat-no" title="statement not covered" >            range[0] = Lib.cleanDate(range[0], BADNUM, ax.calendar);</span>
<span class="cstat-no" title="statement not covered" >            range[1] = Lib.cleanDate(range[1], BADNUM, ax.calendar);</span>
        }
&nbsp;
<span class="cstat-no" title="statement not covered" >        for(i = 0; i &lt; 2; i++) {</span>
<span class="cstat-no" title="statement not covered" >            if(ax.type === 'date') {</span>
<span class="cstat-no" title="statement not covered" >                if(!Lib.isDateTime(range[i], ax.calendar)) {</span>
<span class="cstat-no" title="statement not covered" >                    ax[rangeAttr] = dflt;</span>
<span class="cstat-no" title="statement not covered" >                    break;</span>
                }
&nbsp;
<span class="cstat-no" title="statement not covered" >                if(ax.r2l(range[0]) === ax.r2l(range[1])) {</span>
                    // split by +/- 1 second
<span class="cstat-no" title="statement not covered" >                    var linCenter = Lib.constrain(ax.r2l(range[0]),</span>
                        Lib.MIN_MS + 1000, Lib.MAX_MS - 1000);
<span class="cstat-no" title="statement not covered" >                    range[0] = ax.l2r(linCenter - 1000);</span>
<span class="cstat-no" title="statement not covered" >                    range[1] = ax.l2r(linCenter + 1000);</span>
<span class="cstat-no" title="statement not covered" >                    break;</span>
                }
            }
            else {
<span class="cstat-no" title="statement not covered" >                if(!isNumeric(range[i])) {</span>
<span class="cstat-no" title="statement not covered" >                    if(isNumeric(range[1 - i])) {</span>
<span class="cstat-no" title="statement not covered" >                        range[i] = range[1 - i] * (i ? 10 : 0.1);</span>
                    }
                    else {
<span class="cstat-no" title="statement not covered" >                        ax[rangeAttr] = dflt;</span>
<span class="cstat-no" title="statement not covered" >                        break;</span>
                    }
                }
&nbsp;
<span class="cstat-no" title="statement not covered" >                if(range[i] &lt; -FP_SAFE) <span class="cstat-no" title="statement not covered" >range[i] = -FP_SAFE;</span></span>
                else <span class="cstat-no" title="statement not covered" >if(range[i] &gt; FP_SAFE) <span class="cstat-no" title="statement not covered" >range[i] = FP_SAFE;</span></span>
&nbsp;
<span class="cstat-no" title="statement not covered" >                if(range[0] === range[1]) {</span>
                    // somewhat arbitrary: split by 1 or 1ppm, whichever is bigger
<span class="cstat-no" title="statement not covered" >                    var inc = Math.max(1, Math.abs(range[0] * 1e-6));</span>
<span class="cstat-no" title="statement not covered" >                    range[0] -= inc;</span>
<span class="cstat-no" title="statement not covered" >                    range[1] += inc;</span>
                }
            }
        }
    };
&nbsp;
    // set scaling to pixels
<span class="cstat-no" title="statement not covered" >    ax.setScale = <span class="fstat-no" title="function not covered" >function(usePrivateRange) {</span></span>
<span class="cstat-no" title="statement not covered" >        var gs = fullLayout._size,</span>
            axLetter = ax._id.charAt(0);
&nbsp;
        // TODO cleaner way to handle this case
<span class="cstat-no" title="statement not covered" >        if(!ax._categories) <span class="cstat-no" title="statement not covered" >ax._categories = [];</span></span>
        // Add a map to optimize the performance of category collection
<span class="cstat-no" title="statement not covered" >        if(!ax._categoriesMap) <span class="cstat-no" title="statement not covered" >ax._categoriesMap = {};</span></span>
&nbsp;
        // make sure we have a domain (pull it in from the axis
        // this one is overlaying if necessary)
<span class="cstat-no" title="statement not covered" >        if(ax.overlaying) {</span>
<span class="cstat-no" title="statement not covered" >            var ax2 = axisIds.getFromId({ _fullLayout: fullLayout }, ax.overlaying);</span>
<span class="cstat-no" title="statement not covered" >            ax.domain = ax2.domain;</span>
        }
&nbsp;
        // While transitions are occuring, occurring, we get a double-transform
        // issue if we transform the drawn layer *and* use the new axis range to
        // draw the data. This allows us to construct setConvert using the pre-
        // interaction values of the range:
<span class="cstat-no" title="statement not covered" >        var rangeAttr = (usePrivateRange &amp;&amp; ax._r) ? '_r' : 'range',</span>
            calendar = ax.calendar;
<span class="cstat-no" title="statement not covered" >        ax.cleanRange(rangeAttr);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        var rl0 = ax.r2l(ax[rangeAttr][0], calendar),</span>
            rl1 = ax.r2l(ax[rangeAttr][1], calendar);
&nbsp;
<span class="cstat-no" title="statement not covered" >        if(axLetter === 'y') {</span>
<span class="cstat-no" title="statement not covered" >            ax._offset = gs.t + (1 - ax.domain[1]) * gs.h;</span>
<span class="cstat-no" title="statement not covered" >            ax._length = gs.h * (ax.domain[1] - ax.domain[0]);</span>
<span class="cstat-no" title="statement not covered" >            ax._m = ax._length / (rl0 - rl1);</span>
<span class="cstat-no" title="statement not covered" >            ax._b = -ax._m * rl1;</span>
        }
        else {
<span class="cstat-no" title="statement not covered" >            ax._offset = gs.l + ax.domain[0] * gs.w;</span>
<span class="cstat-no" title="statement not covered" >            ax._length = gs.w * (ax.domain[1] - ax.domain[0]);</span>
<span class="cstat-no" title="statement not covered" >            ax._m = ax._length / (rl1 - rl0);</span>
<span class="cstat-no" title="statement not covered" >            ax._b = -ax._m * rl0;</span>
        }
&nbsp;
<span class="cstat-no" title="statement not covered" >        if(!isFinite(ax._m) || !isFinite(ax._b)) {</span>
<span class="cstat-no" title="statement not covered" >            Lib.notifier(</span>
                'Something went wrong with axis scaling',
                'long');
<span class="cstat-no" title="statement not covered" >            fullLayout._replotting = false;</span>
<span class="cstat-no" title="statement not covered" >            throw new Error('axis scaling');</span>
        }
    };
&nbsp;
    // makeCalcdata: takes an x or y array and converts it
    // to a position on the axis object "ax"
    // inputs:
    //      trace - a data object from gd.data
    //      axLetter - a string, either 'x' or 'y', for which item
    //          to convert (TODO: is this now always the same as
    //          the first letter of ax._id?)
    // in case the expected data isn't there, make a list of
    // integers based on the opposite data
<span class="cstat-no" title="statement not covered" >    ax.makeCalcdata = <span class="fstat-no" title="function not covered" >function(trace, axLetter) {</span></span>
<span class="cstat-no" title="statement not covered" >        var arrayIn, arrayOut, i;</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        var cal = ax.type === 'date' &amp;&amp; trace[axLetter + 'calendar'];</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >        if(axLetter in trace) {</span>
<span class="cstat-no" title="statement not covered" >            arrayIn = trace[axLetter];</span>
<span class="cstat-no" title="statement not covered" >            arrayOut = new Array(arrayIn.length);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >            for(i = 0; i &lt; arrayIn.length; i++) {</span>
<span class="cstat-no" title="statement not covered" >                arrayOut[i] = ax.d2c(arrayIn[i], 0, cal);</span>
            }
        }
        else {
<span class="cstat-no" title="statement not covered" >            var v0 = ((axLetter + '0') in trace) ?</span>
                    ax.d2c(trace[axLetter + '0'], 0, cal) : 0,
                dv = (trace['d' + axLetter]) ?
                    Number(trace['d' + axLetter]) : 1;
&nbsp;
            // the opposing data, for size if we have x and dx etc
<span class="cstat-no" title="statement not covered" >            arrayIn = trace[{x: 'y', y: 'x'}[axLetter]];</span>
<span class="cstat-no" title="statement not covered" >            arrayOut = new Array(arrayIn.length);</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >            for(i = 0; i &lt; arrayIn.length; i++) <span class="cstat-no" title="statement not covered" >arrayOut[i] = v0 + i * dv;</span></span>
        }
<span class="cstat-no" title="statement not covered" >        return arrayOut;</span>
    };
&nbsp;
<span class="cstat-no" title="statement not covered" >    ax.isValidRange = <span class="fstat-no" title="function not covered" >function(range) {</span></span>
<span class="cstat-no" title="statement not covered" >        return (</span>
            Array.isArray(range) &amp;&amp;
            range.length === 2 &amp;&amp;
            isNumeric(ax.r2l(range[0])) &amp;&amp;
            isNumeric(ax.r2l(range[1]))
        );
    };
&nbsp;
    // for autoranging: arrays of objects:
    //      {val: axis value, pad: pixel padding}
    // on the low and high sides
<span class="cstat-no" title="statement not covered" >    ax._min = [];</span>
<span class="cstat-no" title="statement not covered" >    ax._max = [];</span>
&nbsp;
    // copy ref to fullLayout.separators so that
    // methods in Axes can use it w/o having to pass fullLayout
<span class="cstat-no" title="statement not covered" >    ax._separators = fullLayout.separators;</span>
&nbsp;
    // and for bar charts and box plots: reset forced minimum tick spacing
<span class="cstat-no" title="statement not covered" >    delete ax._minDtick;</span>
<span class="cstat-no" title="statement not covered" >    delete ax._forceTick0;</span>
};
&nbsp;
&nbsp;</pre></td></tr>
</table></pre>
</div>
<div class="footer">
    <div class="meta">Generated by <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a> at Sun Apr 23 2017 05:50:33 GMT+0000 (UTC)</div>
</div>
</body>
</html>
